/*
 * jQuery Plug-In: Table fixed head
 *
 *
 * The MIT License
 *
 * Copyright 2016 Michael Weber <me@michiweber.de>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */

!function(t){t.fn.tfh=function(){var i=2===arguments.length?arguments[0]:1===arguments.length&&"string"==typeof arguments[0]?arguments[0]:void 0,e=t.extend({trigger:0,top:0},2===arguments.length?arguments[1]:1===arguments.length&&"object"==typeof arguments[0]?arguments[0]:{});if(this.width=function(){return this.find("thead").attr("data-tmp-width",parseInt(this.find("thead").css("width"))).find("*").each(function(){t(this).attr("data-tmp-width",parseInt(t(this).css("width")))}).end().end()},this.fix=function(){return this.find(".table-fixed-head-thead").css({top:e.top+"px",position:"fixed"}).end()},this.clone=function(){return this.find("thead").clone(!0).prependTo(this).addClass("table-fixed-head-thead").end().end().removeAttr("data-tmp-width").find("*").removeAttr("data-tmp-width").end().end()},this.build=function(){return this.tfh("width").tfh("clone").find("[data-tmp-width]").each(function(){t(this).css({width:t(this).data("tmp-width")+"px",minWidth:t(this).data("tmp-width")+"px",maxWidth:t(this).data("tmp-width")+"px"})}).removeAttr("data-tmp-width").end().tfh("fix",e)},this.kill=function(){this.find(".table-fixed-head-thead").remove()},this.show=function(){return this.addClass("fixed").find("thead").css("visibility","visible").not(".table-fixed-head-thead").css("visibility","hidden").end().end()},this.hide=function(){return this.removeClass("fixed").find("thead").css("visibility","hidden").not(".table-fixed-head-thead").css("visibility","visible").end().end()},void 0!==i)return this[i].call(t(this));var d=this.build.call(t(this),e),n=d.css("width"),h=d.position().left;t(document).scrollTop()>e.trigger?d.tfh("show"):d.tfh("hide");var a;t(window).resize(function(){window.clearInterval(a),a=window.setInterval(function(){window.clearInterval(a),n!==d.css("width")&&(n=d.css("width"),d.tfh("kill"),d.tfh(e))},1e3)}).scroll(function(){t(document).scrollTop()>e.trigger?(d.tfh("show"),d.find(".table-fixed-head-thead").css("left",h-t(document).scrollLeft()+"px")):d.tfh("hide")})},t(document).ready(function(){t("table.table-fixed-head").each(function(){t(this).tfh({trigger:void 0!==t(this).data("table-fixed-head-trigger")?t(this).data("table-fixed-head-trigger"):0,top:void 0!==t(this).data("table-fixed-head-top")?t(this).data("table-fixed-head-top"):t(this).position().top})})})}(jQuery);
